{% extends 'base.html.twig' %}

{% block title %}{{ card.getTitle() }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/style.css') }}">
{% endblock %}

{% block body %}
    {{ include('common/navbar.html.twig', {'subjects': subjects}) }}

    <!-- HEADER -->
    <div class="jumbotron jumbotron-fluid jumbotron-subject">
        <div class="container">
          <h1 class="display-4 text-white">{{ card.getSubject().getName()|capitalize }}</h1>
          <p class="lead text-white">Select a card to learn more!</p>
        </div>
    </div>

    <!-- BREADCRUMBS -->
    <div class="container mb-5" aria-label="breadcrumb">
        <ol class="breadcrumb text-secondary">
            <li class="breadcrumb-item active">First</li>
            <li class="breadcrumb-item"><a href="#second">Second</a></li>
        </ol>
    </div>

    <!-- SLIDES -->
    <div class="container slides my-5 node-main">
        <div class="row">
            <div class="col-xl-6">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            </div>
            <div class="col-xl-6 d-flex flex-column justify-content-between align-items-start">
                <div>
                    <h2 class="main-title text-dark">{{ card.getTitle() }}</h2>
                    <p class="main-text text-dark">{{ card.getDescription() }}</p>
                </div>
                <button type="button" class="btn btn-outline-warning">Edit this Card</button>
            </div>
        </div>
    </div>

    <!-- heading for CARDS -->
    <div class="container text-center mb-4">
        <h2 class="text-dark">Let's learn more! Select another card!</h2>
    </div>

    {{ include('common/search-box.html.twig') }}

    <!-- CARDS -->
    <section class="container mb-5 nodes-container">
        <div class="row">
            {% for subcard in card.getSubcards() %}
                {{ include('card/card-preview.html.twig', {'card': subcard}) }}
            {% endfor %}
            <!-- Add New Card card -->
            <div class="col-sm-6 col-lg-4 col-xl-3 mb-3 node-new">
                <div class="card card-new py-4 h-100 text-white">
                    <div class="card-body d-flex flex-column justify-content-center align-items-center">
                        <h5 class="card-title h1 text-center text-light">Create a new card!</h5>
                        <button type="button" class="btn btn-lg btn-light mt-2" data-toggle="modal"
                            data-target="#addCardModal">
                            Add new
                        </button>
                    </div>
                </div>
            </div>
            <!-- End of the Add New Card card -->
        </div>
    </section>

    <span class="hidden js-card-tree">{{ card.toJSONArray()|json_encode() }}</span>

    {{ include('common/footer.html.twig') }}

    <!-- MODALS -->
    <div class="modal fade" id="addCardModal" tabindex="-1" role="dialog"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add new card</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="#" method="post">
                        <div class="form-group">
                            <label for="recipient-name" class="col-form-label">Title:</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="form-group">
                            <label for="message-text" class="col-form-label">Description:</label>
                            <textarea class="form-control" id="message-text"></textarea>
                        </div>

                        <div class="form-group file-input-group">
                            <div class="form-control file-label custom-img-imput">
                                <div class="row no-gutters file-previews"></div>
                            </div>
                            <a class="btn btn-primary custom-img-imput-btn file-input-trigger text-white">Choose a file</a>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary form-post">Create</button>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}

{% block javascripts %}
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script src="{{ asset('js/addCardModalSetup.js') }}"></script>
    <script src="{{ asset('js/cardSearchSetup.js') }}"></script>
    <script src="{{ asset('js/subpage.js') }}"></script>
    <script src="{{ asset('js/templates.js') }}"></script>
{% endblock javascripts %}
